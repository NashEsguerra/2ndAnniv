<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy 2nd Anniversary ðŸ’–</title>
    <meta name="description" content="A beautiful anniversary slideshow of our favorite memories.">
    <meta name="theme-color" content="#764ba2">
    <meta name="color-scheme" content="light dark">
    <meta property="og:title" content="Happy 2nd Anniversary ðŸ’–">
    <meta property="og:description" content="Celebrating two wonderful years together">
    <meta property="og:type" content="website">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', 'Times New Roman', serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow: hidden;
            position: relative;
        }

        /* Floating hearts animation */
        .hearts-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
            overflow: hidden;
        }

        .heart {
            position: absolute;
            font-size: 20px;
            animation: float 8s infinite ease-in-out;
            opacity: 0;
        }

        @keyframes float {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.8;
            }
            90% {
                opacity: 0.8;
            }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }

        /* Main container */
        .container {
            position: relative;
            z-index: 2;
            width: 100%;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        /* Welcome screen */
        .welcome-screen {
            text-align: center;
            color: white;
            animation: fadeIn 2s ease-in;
            max-width: 90%;
        }

        .welcome-screen h1 {
            font-size: clamp(2rem, 8vw, 4rem);
            margin-bottom: 20px;
            text-shadow: 2px 2px 10px rgba(0, 0, 0, 0.3);
            line-height: 1.2;
        }

        .welcome-screen p {
            font-size: clamp(1rem, 4vw, 1.5rem);
            text-shadow: 1px 1px 5px rgba(0, 0, 0, 0.3);
            margin-top: 15px;
        }

        /* Slideshow container */
        .slideshow-container {
            display: none;
            width: 100%;
            height: 100vh;
            position: relative;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            padding: 20px;
        }

        .slideshow-container.active {
            display: flex;
        }

        .photo-counter {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.9);
            padding: 10px 20px;
            border-radius: 25px;
            font-size: clamp(0.875rem, 2vw, 1rem);
            font-weight: bold;
            color: #764ba2;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            z-index: 10;
        }

        .photo-wrapper {
            position: relative;
            width: 100%;
            max-width: 800px;
            height: 70vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .photo {
            position: absolute;
            max-width: 100%;
            max-height: 100%;
            width: auto;
            height: auto;
            object-fit: contain;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            opacity: 0;
            transition: opacity 0.8s ease-in-out;
            transform-origin: center;
        }

        .photo.active {
            opacity: 1;
        }

        /* Final message */
        .final-message {
            display: none;
            text-align: center;
            color: white;
            max-width: 90%;
            padding: 20px;
        }

        .final-message.active {
            display: block;
            animation: popInSlow 2.5s ease-out both;
        }

        .final-message h2 {
            font-size: clamp(1.75rem, 6vw, 3rem);
            margin-bottom: 20px;
            text-shadow: 2px 2px 10px rgba(0, 0, 0, 0.3);
            line-height: 1.3;
        }

        .final-message p {
            font-size: clamp(1rem, 4vw, 1.5rem);
            text-shadow: 1px 1px 5px rgba(0, 0, 0, 0.3);
            line-height: 1.6;
            margin-top: 15px;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }

        /* Extra slideshow effects */
        @keyframes zoomIn {
            from { transform: scale(1.06); opacity: 0; }
            to   { transform: scale(1); opacity: 1; }
        }
        @keyframes zoomOut {
            from { transform: scale(0.94); opacity: 0; }
            to   { transform: scale(1); opacity: 1; }
        }
        @keyframes slideUpIn {
            from { transform: translateY(20px); opacity: 0; }
            to   { transform: translateY(0); opacity: 1; }
        }
        @keyframes slideRightIn {
            from { transform: translateX(20px); opacity: 0; }
            to   { transform: translateX(0); opacity: 1; }
        }
        @keyframes kenBurns {
            0%   { transform: scale(1) translate(0, 0); }
            100% { transform: scale(1.08) translate(2%, -2%); }
        }

        .photo.effect-zoom-in.active { animation: zoomIn 1.1s ease both; }
        .photo.effect-zoom-out.active { animation: zoomOut 1.1s ease both; }
        .photo.effect-slide-up.active { animation: slideUpIn 1s ease-out both; }
        .photo.effect-slide-right.active { animation: slideRightIn 1s ease-out both; }
        .photo.effect-kenburns.active { animation: zoomIn 0.8s ease both, kenBurns var(--kenburns-duration, 3500ms) ease-in-out both; }

        /* Final message slow pop */
        @keyframes popInSlow {
            0%   { opacity: 0; transform: scale(0.92) translateY(10px); filter: blur(4px); }
            60%  { opacity: 1; transform: scale(1.02) translateY(0); filter: blur(0); }
            100% { opacity: 1; transform: scale(1); }
        }



        /* Loading indicator */
        .loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: clamp(1rem, 3vw, 1.2rem);
            text-shadow: 1px 1px 5px rgba(0, 0, 0, 0.3);
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .photo-counter {
                top: 10px;
                right: 10px;
                padding: 8px 15px;
            }

            .photo-wrapper {
                height: 60vh;
            }

            .heart {
                font-size: 16px;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 15px;
            }

            .photo-wrapper {
                height: 50vh;
            }

            .photo {
                border-radius: 10px;
            }

            .photo-counter {
                padding: 6px 12px;
            }
        }

        /* Landscape mobile optimization */
        @media (max-height: 500px) and (orientation: landscape) {
            .photo-wrapper {
                height: 80vh;
            }

            .welcome-screen h1 {
                margin-bottom: 10px;
            }

            .photo-counter {
                top: 5px;
                right: 5px;
                padding: 5px 10px;
            }

        }
        /* Audio prompt */
        .audio-prompt{position:fixed;left:50%;bottom:24px;transform:translateX(-50%);background:rgba(0,0,0,.6);color:#fff;padding:.6rem .9rem;border-radius:999px;backdrop-filter:saturate(120%) blur(6px);box-shadow:0 6px 20px rgba(0,0,0,.25);font-size:.95rem;letter-spacing:.2px;display:none;align-items:center;gap:.5rem;z-index:2000}
        .audio-prompt.active{display:flex}
        .audio-prompt:focus{outline:2px solid #fff3;outline-offset:2px}


    </style>
</head>
<body>

    <!-- Floating hearts -->
    <div class="hearts-container" id="heartsContainer" aria-hidden="true"></div>
    <!-- Autoplay prompt (appears only if needed) -->
    <div id="audioPrompt" class="audio-prompt" role="button" aria-label="Enable sound" tabindex="0">ðŸ”Š Tap to enable sound</div>


    <!-- Background music -->
    <audio id="bgMusic" preload="auto" loop playsinline autoplay muted>
        <source src="music/labyrinth.mp3" type="audio/mpeg">
    </audio>

    <!-- Main container -->
    <div class="container">
        <!-- Welcome screen -->
        <div class="welcome-screen" id="welcomeScreen" role="region" aria-label="Welcome">
            <h1>Happy 2nd Anniversary, My Baby ðŸ’–</h1>
            <p>Celebrating two wonderful years together</p>
        </div>

        <!-- Slideshow -->
        <div class="slideshow-container" id="slideshowContainer" role="region" aria-label="Photo slideshow">
            <div class="photo-counter" id="photoCounter"></div>
            <div class="photo-wrapper">
                <img class="photo active" id="currentPhoto" src="pictures/2.jpg" alt="Memory 1" loading="eager" decoding="async" fetchpriority="high">
            </div>
        </div>

        <!-- Final message -->
        <div class="final-message" id="finalMessage" role="region" aria-live="polite">
            <h2>Thank you for everything.</h2>
            <p>Honestly, I stopped believing in love and even in myself, but then you came. Youâ€™re that unexpected person who made me believe again in love, in life, and in who I am. You really changed everything.</p>
        </div>
    </div>

    <script>
        // Configuration
        const WELCOME_DURATION = 4000; // 4 seconds
        const PHOTO_DURATION = 3500; // 3.5 seconds per photo
        const MUSIC_START_TIME = 13; // Start music at 13 seconds (skip 0â€“12s)

        // Photo paths in order (limited to existing images for reliability)
        const photos = [
            { src: 'pictures/2.jpg', alt: 'Memory 1' },
            { src: 'pictures/29.jpg', alt: 'Memory 2' },
            { src: 'pictures/6.jpg', alt: 'Memory 3' },
            { src: 'pictures/17.jpg', alt: 'Memory 4' },
            { src: 'pictures/7.jpg', alt: 'Memory 5' },
            { src: 'pictures/37.jpg', alt: 'Memory 6' },
            { src: 'pictures/1.jpg', alt: 'Memory 7' },
            { src: 'pictures/13.jpg', alt: 'Memory 8' },
            { src: 'pictures/35.jpg', alt: 'Memory 9' },
            { src: 'pictures/51.jpg', alt: 'Memory 10' },
            { src: 'pictures/24.jpg', alt: 'Memory 11' },
            { src: 'pictures/28.jpg', alt: 'Memory 12' },
            { src: 'pictures/25.jpg', alt: 'Memory 13' },
            { src: 'pictures/27.jpg', alt: 'Memory 14' },
            { src: 'pictures/14.jpg', alt: 'Memory 15' },
            { src: 'pictures/50.jpg', alt: 'Memory 16' },
            { src: 'pictures/31.jpg', alt: 'Memory 17' },
            { src: 'pictures/52.jpg', alt: 'Memory 18' },
            { src: 'pictures/15.jpg', alt: 'Memory 19' },
            { src: 'pictures/34.jpg', alt: 'Memory 20' },
            { src: 'pictures/53.jpg', alt: 'Memory 21' },
            { src: 'pictures/54.jpg', alt: 'Memory 22' },
            { src: 'pictures/23.jpg', alt: 'Memory 23' },
            { src: 'pictures/22.jpg', alt: 'Memory 24' },



            { src: 'pictures/43.jpg', alt: 'Memory 25' },
            { src: 'pictures/44.jpg', alt: 'Memory 26' },
            { src: 'pictures/11.jpg', alt: 'Memory 27' },
            { src: 'pictures/12.jpg', alt: 'Memory 28' },
            { src: 'pictures/40.jpg', alt: 'Memory 29' },
            { src: 'pictures/4.jpg', alt: 'Memory 30' },
            { src: 'pictures/41.jpg', alt: 'Memory 31' },
            { src: 'pictures/42.jpg', alt: 'Memory 32' },
            { src: 'pictures/46.jpg', alt: 'Memory 33' },
            { src: 'pictures/33.jpg', alt: 'Memory 34' },
            { src: 'pictures/32.jpg', alt: 'Memory 35' },
            { src: 'pictures/26.jpg', alt: 'Memory 36' },
            { src: 'pictures/18.jpg', alt: 'Memory 37' },
            { src: 'pictures/3.jpg', alt: 'Memory 38' },
            { src: 'pictures/56.jpg', alt: 'Memory 39' },
            { src: 'pictures/8.jpg', alt: 'Memory 40' },
            { src: 'pictures/20.jpg', alt: 'Memory 41' },
            { src: 'pictures/10.jpg', alt: 'Memory 42' },
            { src: 'pictures/5.jpg', alt: 'Memory 43' },
            { src: 'pictures/16.jpg', alt: 'Memory 44' },
            { src: 'pictures/19.jpg', alt: 'Memory 45' },
            { src: 'pictures/9.jpg', alt: 'Memory 46' },
            { src: 'pictures/38.jpg', alt: 'Memory 47' },
            { src: 'pictures/45.jpg', alt: 'Memory 48' },
            { src: 'pictures/39.jpg', alt: 'Memory 49' },
            { src: 'pictures/49.jpg', alt: 'Memory 50' },
            { src: 'pictures/47.jpg', alt: 'Memory 51' },
            { src: 'pictures/36.jpg', alt: 'Memory 52' }
        ];

        let currentPhotoIndex = 0;
        const bgMusic = document.getElementById('bgMusic');
        const welcomeScreen = document.getElementById('welcomeScreen');
        const slideshowContainer = document.getElementById('slideshowContainer');
        const finalMessage = document.getElementById('finalMessage');
        const photoCounter = document.getElementById('photoCounter');
        const currentPhoto = document.getElementById('currentPhoto');

        // Create floating hearts
        function createHeart() {



            const heart = document.createElement('div');
            heart.className = 'heart';
            heart.textContent = 'ðŸ’–';
            heart.style.left = Math.random() * 100 + '%';
            heart.style.animationDelay = Math.random() * 5 + 's';
            heart.style.animationDuration = (Math.random() * 3 + 6) + 's';
            document.getElementById('heartsContainer').appendChild(heart);
        }

        // Initialize hearts
        for (let i = 0; i < 15; i++) {
            createHeart();
        }

        // Start music with 13-second skip (best-effort autoplay)
        function startMusic() {
            const ensureStartTime = () => { try { bgMusic.currentTime = MUSIC_START_TIME; } catch(e){} };
            // Try muted autoplay to satisfy browser policies
            bgMusic.muted = true;
            try { bgMusic.volume = 0; } catch(e){}
            ensureStartTime();

            const tryPlay = () => bgMusic.play().then(() => {
                // Attempt to unmute and fade in shortly after playback begins
                setTimeout(() => {
                    ensureStartTime();
                    try { bgMusic.muted = false; } catch(e){}
                    try {
                        let v = 0; const target = 0.9; const step = 0.1;
                        const iv = setInterval(() => {
                            v = Math.min(target, v + step);
                            try { bgMusic.volume = v; } catch(e){}
                            if (v >= target) clearInterval(iv);
                        }, 150);
                    } catch(e){}
                }, 300);
            }).catch(() => {
                // As a fallback (for strict browsers like iOS Safari), show prompt
                const prompt = document.getElementById('audioPrompt');
                if (prompt) prompt.classList.add('active');
                const startOnInteract = () => {
                    ensureStartTime();
                    try { bgMusic.muted = false; } catch(e){}
                    bgMusic.play().finally(() => { if (prompt) prompt.classList.remove('active'); });
                    window.removeEventListener('pointerdown', startOnInteract, true);
                    window.removeEventListener('keydown', onKey, true);
                };
                const onKey = (e) => { if (e.key === 'Enter' || e.key === ' ') startOnInteract(); };
                window.addEventListener('pointerdown', startOnInteract, { once: true, capture: true });
                window.addEventListener('keydown', onKey, { capture: true });
            });

            if (bgMusic.readyState >= 1) tryPlay();
            else bgMusic.addEventListener('loadedmetadata', tryPlay, { once: true });
        }

        // Show next photo
        // Show next photo (with preload and error-skip)
        function showNextPhoto() {
            if (currentPhotoIndex >= photos.length) {
                setTimeout(showFinalMessage, PHOTO_DURATION);
                return;
            }


        // Transition effects
        const effects = ['effect-zoom-in','effect-zoom-out','effect-slide-up','effect-slide-right','effect-kenburns'];
        function applyEffect(el) {
            el.classList.remove('effect-zoom-in','effect-zoom-out','effect-slide-up','effect-slide-right','effect-kenburns');
            const effect = effects[Math.floor(Math.random() * effects.length)];
            if (effect === 'effect-kenburns') {
                el.style.setProperty('--kenburns-duration', `${PHOTO_DURATION}ms`);
            }
            el.classList.add(effect);
        }

            const { src, alt } = photos[currentPhotoIndex];
            const preload = new Image();
            preload.onload = () => {
                currentPhoto.classList.remove('active');

                setTimeout(() => {
                    currentPhoto.src = src;
                    currentPhoto.alt = alt;
                    photoCounter.textContent = `Photo ${currentPhotoIndex + 1} of ${photos.length}`;
                    applyEffect(currentPhoto);
                    setTimeout(() => currentPhoto.classList.add('active'), 50);
                }, 100);

                currentPhotoIndex++;
                setTimeout(showNextPhoto, PHOTO_DURATION);
            };
            preload.onerror = () => {
                // Skip missing/broken image
                currentPhotoIndex++;
                showNextPhoto();
            };
            preload.src = src;
        }

        // Show final message
        function showFinalMessage() {
            slideshowContainer.style.display = 'none';
            finalMessage.classList.add('active');
        }

        // Start the experience
        function startExperience() {
            startMusic();

            // Transition from welcome to slideshow
            setTimeout(() => {
                welcomeScreen.style.display = 'none';
                slideshowContainer.classList.add('active');
                showNextPhoto();
            }, WELCOME_DURATION);
        }

        // Initialize when page loads
        window.addEventListener('load', () => {
            startExperience();
        });

        // Fallback for browsers that block autoplay
        document.body.addEventListener('click', () => {
            if (bgMusic.paused) {
                bgMusic.currentTime = MUSIC_START_TIME;
                bgMusic.play();
            }
        }, { once: true });
    </script>
</body>
</html>
